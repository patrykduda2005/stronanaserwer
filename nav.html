<!DOCTYPE html>
<html lang="pl-pl">
    <head>
        <title>Le Strona</title>
        <link rel="stylesheet" href="globalstyle.css">
        <link rel="stylesheet" href="navstyle.css">
        <meta charset="UTF-8">
    </head>
    <body>
        <header>
            <a id="naglowek" href="index.html" target="_parent">Strona Dudy</a>
            <img id="hamburger" alt="hamburger" src="hamburger.png" onclick="toggleNav()">
        </header>
        <nav>
            <span class="edge"></span>
            <a href="teorie.html" target="_parent">Teorie</a>
            <a href="projekty.html" target="_parent">Projekty</a>
            <span class="edge"></span>
        </nav>
        <script>
        function toggleNav() {
            let nav = document.querySelector("nav");
            if (nav.style.display == "flex") {
                nav.style.display = "none";
                sessionStorage.setItem("navState", "none");
                changeIframeSize();
            } else {
                nav.style.display = "flex";
                sessionStorage.setItem("navState", "flex");
                changeIframeSize();
            }
        }

        //Maintain navigation state between html pages
        function maintainNavState() {
            let state = sessionStorage.getItem('navState');
            if (state != undefined) {
                document.querySelector("nav").style.display = state;
            }
        }
        maintainNavState();

        //Change navigation button when it's active
        function changeButtonShape() {
            let parentUrl = parent.document.location.pathname;
            parentUrl = /[^\/]*$/.exec(parentUrl)[0] //bierze tylko nazwe pliku
            let button = document.querySelector("nav a[href='" + parentUrl + "']");
            if (button == undefined) return;
            let backgroundColor = getComputedStyle(parent.document.body).backgroundColor;
            button.style = "border-width: 1px 1px 0px 1px; background-color: " + backgroundColor + ";";
        }
        changeButtonShape();


        function changeIframeSize() {
            let message = document.body.offsetHeight;
            window.top.postMessage(message, "*");
        }
        window.addEventListener('load', changeIframeSize(), false);
        </script>
    </body>
</html>
